<div class="modal" id="protocol-versions-modal" class="protocol-versions-modal" tabindex="-1" role="dialog" aria-labelledby="protocol-versions-modal-label">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="protocol-versions-modal-label">
          <%= t('protocols.index.versions.title', protocol: @protocol.name) %>
        </h4>
      </div>
      <div class="modal-body">
        <% if @protocol.draft.present? %>
          <div class="row protocol-version-row">
            <div class="col-xs-12">
              <div class="row">
                <div class="col-xs-12">
                  <span class="protocol-version-link">
                    <%= t('protocols.index.versions.draft', parent_version: @protocol.draft.version_number) %>
                  </span>
                  <%= t('protocols.index.versions.draft_modification_info', 
                        modified_on: @protocol.draft.updated_at.present? ? l(@protocol.draft.updated_at, format: :full_date) : '',
                        modified_by: @protocol.draft.last_modified_by&.full_name) %>
                </div>
              </div>
              <div class="row protocol-version-comment-row">
                <div class="col-xs-12">
                  <%= @protocol.draft.version_comment %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
        <% @published_versions.each do |protocol_version| %>
          <div class="row protocol-version-row">
            <div class="col-xs-12">
              <div class="row">
                <div class="col-xs-12">
                  <span class="protocol-version-link">
                    <%= t('protocols.index.versions.revision', version: protocol_version.version_number) %>
                  </span>
                  <%= t('protocols.index.versions.revision_publishing_info', 
                        published_on: protocol_version.published_on.present? ? l(protocol_version.published_on, format: :full_date) : '',
                        published_by: protocol_version.published_by&.full_name) %>
                </div>
              </div>
              <div class="row">
                <div class="col-xs-12 protocol-version-comment-row">
                  <%= protocol_version.version_comment %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>
