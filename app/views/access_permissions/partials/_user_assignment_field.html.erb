<% # frozen_string_literal: true %>

<%
  project_member = f.object
  user = project_member.user
  id = dom_id(user, :new_project_member)
%>

<div class="row member-item" data-filter-item="<%= user.full_name %>">
  <%= f.hidden_field :user_id, value: user.id, name:"access_permissions_new_user_project_form[resource_members][#{user.id}][user_id]"  %>
   <div class="col-xs-5">
      <div class="sci-checkbox-container">
        <%= f.check_box :assign,
                          name: "access_permissions_new_user_project_form[resource_members][#{user.id}][assign]",
                          data: { action: 'toggle-visibility', target: id },
                          class: "sci-checkbox"
          %>
        <span class="sci-checkbox-label"></span>
      </div>
      <span class="global-avatar-container">
        <%= image_tag avatar_path(user, :icon_small), title: current_assignee_name(user), class: 'img-circle pull-left' %>
      </span>
      <span class="user-assignment-info">
        <span><%= current_assignee_name(user) %></span>
      </span>
    </div>

  <div class="col-xs-4 form-group hidden" id="<%= id %>">
    <%= f.select :user_role_id,
                 options_for_select(user_roles_collection),
                 {},
                 name: "access_permissions_new_user_project_form[resource_members][#{user.id}][user_role_id]",
                 class: 'form-control selectpicker pull-right',
                 title: t('user_assignment.select_role')  %>
  </div>
</div>
