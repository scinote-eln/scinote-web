<% status = my_module.my_module_status %>
<div class="status-label"><%= t('my_module_statuses.dropdown.status_label') %></div>
<div class="dropdown sci-dropdown status-flow-dropdown">
  <button class="btn btn-secondary dropdown-toggle"
          type="button"
          data-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="true"
          style="<%= "background-color: #{status.color}" %>;">
    <span><%= status.name %></span>
    <span class="caret pull-right"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownTaskFlow" id="dropdownTaskFlowList" data-link-url="<%= update_state_my_module_url(my_module) %>">
    <% unless status.initial_status? %>
      <% previous_s = status.previous_status %>
      <li data-state-id="<%= previous_s.id %>">
        <span><%= t 'my_module_statuses.dropdown.return_label' %></span> <span style="<%= "background-color: #{previous_s.color}" %>"><%= previous_s.name %></span>
      </li>
    <% end %>

    <% unless status.final_status? %>
      <% next_s = status.next_status %>
      <li data-state-id="<%= next_s.id %>">
        <span><%= t('my_module_statuses.dropdown.move_label') %></span> <span style="<%= "background-color: #{next_s.color}" %>"><%= next_s.name %></span>
      </li>
    <% end %>
    <li id="viewTaskFlow">
      <%= t('my_module_statuses.dropdown.view_flow_label') %>
    </li>
  </ul>
</div>
