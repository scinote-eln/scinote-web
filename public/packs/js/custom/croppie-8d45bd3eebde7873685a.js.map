{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app/javascript/packs/custom/croppie.js","webpack:///./node_modules/croppie/croppie.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","setImmediate","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","self","undefined","Promise","a","b","apply","arguments","this","TypeError","_state","_value","_deferreds","e","f","push","k","onFulfilled","onRejected","reject","resolve","then","g","length","h","j","setTimeout","Array","isArray","toString","all","slice","constructor","race","_setImmediateFn","window","CustomEvent","event","params","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","Event","HTMLCanvasElement","toBlob","callback","type","quality","binStr","atob","toDataURL","split","len","arr","Uint8Array","charCodeAt","Blob","CSS_TRANS_ORG","CSS_TRANSFORM","CSS_USERSELECT","cssPrefixes","emptyStyles","createElement","style","EXIF_NORM","EXIF_FLIP","vendorPrefix","prop","capProp","toUpperCase","deepExtend","destination","source","clone","dispatchChange","element","initEvent","dispatchEvent","fireEvent","css","el","styles","val","tmp","addClass","classList","add","className","setAttributes","attrs","setAttribute","num","v","parseInt","naturalImageDimensions","img","ornt","w","naturalWidth","naturalHeight","orient","getExifOrientation","x","width","height","TRANSLATE_OPTS","translate3d","suffix","translate","Transform","y","scale","parseFloat","parse","indexOf","fromMatrix","fromString","vals","substring","values","Croppie","globals","TransformOrigin","exifdata","Orientation","drawCanvas","canvas","orientation","ctx","getContext","save","rotate","Math","PI","drawImage","restore","_create","boundary","viewport","overlay","bw","bh","customViewportClass","options","useCanvas","enableOrientation","_hasExif","data","elements","preview","isNaN","alt","aria-grabbed","appendChild","customClass","originalX","originalY","originalDistance","vpRect","transform","isDragging","assignTransformCoordinates","deltaX","deltaY","imgRect","getBoundingClientRect","top","left","enforceBoundary","bottom","right","toggleGrabState","mouseDown","ev","button","preventDefault","pageX","pageY","touches","addEventListener","mouseMove","mouseUp","body","newCss","touch1","touch2","dist","sqrt","_currentZoom","_setZoomerVal","zoomer","_updateOverlay","removeEventListener","_updateCenterPoint","_triggerUpdate","zoom","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","shiftKey","keyCode","enableKeyMovement","movement","parseKeyDown","keyMove","step","setZoom","enableZoom","wrap","zoomerWrap","change","ui","viewportRect","origin","applyCss","transCss","boundaries","vpWidth","vpHeight","centerFromBoundaryX","clientWidth","centerFromBoundaryY","clientHeight","curImgWidth","curImgHeight","halfWidth","halfHeight","maxX","maxY","originMinX","originMinY","minX","minY","transBoundaries","oBoundaries","_debouncedOverlay","scroll","delta","targetZoom","mouseWheelZoom","ctrlKey","wheelDelta","display","showZoomer","enableResize","direction","maxWidth","maxHeight","vr","hr","minSize","overlayRect","currentTarget","newHeight","newWidth","_updateZoomLimits","resizeControls","enableExif","EXIF","z","fix","max","min","vpData","pc","center","adj","cx","cy","tx","ty","boundRect","imgData","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","_isVisible","update","$","Prototype","trigger","offsetHeight","offsetWidth","_updatePropertiesFromImage","cssReset","transformReset","originReset","isVisible","bound","_originalImageWidth","_originalImageHeight","points","pointsWidth","vpOffset","originTop","originLeft","transformTop","transformLeft","imgDim","vpDim","boundDim","vpLeft","vpTop","initial","initialZoom","defaultInitialZoom","minW","minH","minZoom","maxZoom","boundaryData","boundZoom","_getCanvas","circle","canvasWidth","outputWidth","canvasHeight","outputHeight","backgroundColor","fillStyle","fillRect","sx","sy","sWidth","sHeight","dx","dy","dWidth","dHeight","abs","globalCompositeOperation","beginPath","arc","closePath","fill","_bind","cb","url","src","doExif","hasExif","Image","opacity","_resolve","removeAttribute","match","onload","getData","onerror","parentNode","forEach","replaceChild","relative","natDim","rect","aspectRatio","imgAspectRatio","x0","y0","x1","y1","map","customOrientation","clearRect","decimalPoints","toFixed","_get","widthDiff","heightDiff","x2","y2","Infinity","Number","NEGATIVE_INFINITY","RESULT_DEFAULTS","format","RESULT_FORMATS","jQuery","fn","croppie","opts","ot","singleInst","result","each","method","isFunction","removeData","Error","defaults","tagName","toLowerCase","origImage","aria-hidden","replacementDiv","bindOpts","orientationControls","enabled","leftClass","rightClass","resultType","size","ratio","blob","div","refresh","deg","index","offset","destroy","removeChild","remove","replace","Function","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","run","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","global","scope","Timeout","id","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","documentElement","script","onreadystatechange","random","attachEvent","task"],"mappings":"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","file":"js/custom/croppie-8d45bd3eebde7873685a.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/packs/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","require('croppie');\n","/*************************\r\n * Croppie\r\n * Copyright 2019\r\n * Foliotek\r\n * Version: 2.6.4\r\n *************************/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n        // CommonJS\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals\r\n        root.Croppie = factory();\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function () {\r\n\r\n    /* Polyfills */\r\n    if (typeof Promise !== 'function') {\r\n        /*! promise-polyfill 3.1.0 */\r\n        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!==typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!==typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"===typeof a||\"function\"===typeof a)){var c=a.then;if(\"function\"===typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"===typeof a?a:null,this.onRejected=\"function\"===typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"===typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"===typeof g||\"function\"===typeof g)){var h=g.then;if(\"function\"===typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"===typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!==typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n    }\r\n\r\n    if ( typeof window.CustomEvent !== \"function\" ) {\r\n        (function(){\r\n            function CustomEvent ( event, params ) {\r\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n                var evt = document.createEvent( 'CustomEvent' );\r\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n                return evt;\r\n            }\r\n            CustomEvent.prototype = window.Event.prototype;\r\n            window.CustomEvent = CustomEvent;\r\n        }());\r\n    }\r\n\r\n    if (!HTMLCanvasElement.prototype.toBlob) {\r\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n            value: function (callback, type, quality) {\r\n                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n                len = binStr.length,\r\n                arr = new Uint8Array(len);\r\n\r\n                for (var i=0; i<len; i++ ) {\r\n                    arr[i] = binStr.charCodeAt(i);\r\n                }\r\n\r\n                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n            }\r\n        });\r\n    }\r\n    /* End Polyfills */\r\n\r\n    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n        emptyStyles = document.createElement('div').style,\r\n        EXIF_NORM = [1,8,3,6],\r\n        EXIF_FLIP = [2,7,4,5],\r\n        CSS_TRANS_ORG,\r\n        CSS_TRANSFORM,\r\n        CSS_USERSELECT;\r\n\r\n    function vendorPrefix(prop) {\r\n        if (prop in emptyStyles) {\r\n            return prop;\r\n        }\r\n\r\n        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            prop = cssPrefixes[i] + capProp;\r\n            if (prop in emptyStyles) {\r\n                return prop;\r\n            }\r\n        }\r\n    }\r\n\r\n    CSS_TRANSFORM = vendorPrefix('transform');\r\n    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\r\n    function getExifOffset(ornt, rotate) {\r\n        var arr = EXIF_NORM.indexOf(ornt) > -1 ? EXIF_NORM : EXIF_FLIP,\r\n            index = arr.indexOf(ornt),\r\n            offset = (rotate / 90) % arr.length;// 180 = 2%4 = 2 shift exif by 2 indexes\r\n\r\n        return arr[(arr.length + index + (offset % arr.length)) % arr.length];\r\n    }\r\n\r\n    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n    function deepExtend(destination, source) {\r\n        destination = destination || {};\r\n        for (var property in source) {\r\n            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    function clone(object) {\r\n        return deepExtend({}, object);\r\n    }\r\n\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    function dispatchChange(element) {\r\n        if (\"createEvent\" in document) {\r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", false, true);\r\n            element.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            element.fireEvent(\"onchange\");\r\n        }\r\n    }\r\n\r\n    //http://jsperf.com/vanilla-css\r\n    function css(el, styles, val) {\r\n        if (typeof (styles) === 'string') {\r\n            var tmp = styles;\r\n            styles = {};\r\n            styles[tmp] = val;\r\n        }\r\n\r\n        for (var prop in styles) {\r\n            el.style[prop] = styles[prop];\r\n        }\r\n    }\r\n\r\n    function addClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.add(c);\r\n        }\r\n        else {\r\n            el.className += ' ' + c;\r\n        }\r\n    }\r\n\r\n    function removeClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.remove(c);\r\n        }\r\n        else {\r\n            el.className = el.className.replace(c, '');\r\n        }\r\n    }\r\n\r\n    function setAttributes(el, attrs) {\r\n        for (var key in attrs) {\r\n            el.setAttribute(key, attrs[key]);\r\n        }\r\n    }\r\n\r\n    function num(v) {\r\n        return parseInt(v, 10);\r\n    }\r\n\r\n    /* Utilities */\r\n    function loadImage(src, doExif) {\r\n        var img = new Image();\r\n        img.style.opacity = '0';\r\n        return new Promise(function (resolve, reject) {\r\n            function _resolve() {\r\n                img.style.opacity = '1';\r\n                setTimeout(function () {\r\n                    resolve(img);\r\n                }, 1);\r\n            }\r\n\r\n            img.removeAttribute('crossOrigin');\r\n            if (src.match(/^https?:\\/\\/|^\\/\\//)) {\r\n                img.setAttribute('crossOrigin', 'anonymous');\r\n            }\r\n\r\n            img.onload = function () {\r\n                if (doExif) {\r\n                    EXIF.getData(img, function () {\r\n                        _resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _resolve();\r\n                }\r\n            };\r\n            img.onerror = function (ev) {\r\n                img.style.opacity = 1;\r\n                setTimeout(function () {\r\n                    reject(ev);\r\n                }, 1);\r\n            };\r\n            img.src = src;\r\n        });\r\n    }\r\n\r\n    function naturalImageDimensions(img, ornt) {\r\n        var w = img.naturalWidth;\r\n        var h = img.naturalHeight;\r\n        var orient = ornt || getExifOrientation(img);\r\n        if (orient && orient >= 5) {\r\n            var x= w;\r\n            w = h;\r\n            h = x;\r\n        }\r\n        return { width: w, height: h };\r\n    }\r\n\r\n    /* CSS Transform Prototype */\r\n    var TRANSLATE_OPTS = {\r\n        'translate3d': {\r\n            suffix: ', 0px'\r\n        },\r\n        'translate': {\r\n            suffix: ''\r\n        }\r\n    };\r\n    var Transform = function (x, y, scale) {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.scale = parseFloat(scale);\r\n    };\r\n\r\n    Transform.parse = function (v) {\r\n        if (v.style) {\r\n            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n        }\r\n        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n            return Transform.fromMatrix(v);\r\n        }\r\n        else {\r\n            return Transform.fromString(v);\r\n        }\r\n    };\r\n\r\n    Transform.fromMatrix = function (v) {\r\n        var vals = v.substring(7).split(',');\r\n        if (!vals.length || v === 'none') {\r\n            vals = [1, 0, 0, 1, 0, 0];\r\n        }\r\n\r\n        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n    };\r\n\r\n    Transform.fromString = function (v) {\r\n        var values = v.split(') '),\r\n            translate = values[0].substring(Croppie.globals.translate.length + 1).split(','),\r\n            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n            x = translate.length > 1 ? translate[0] : 0,\r\n            y = translate.length > 1 ? translate[1] : 0;\r\n\r\n        return new Transform(x, y, scale);\r\n    };\r\n\r\n    Transform.prototype.toString = function () {\r\n        var suffix = TRANSLATE_OPTS[Croppie.globals.translate].suffix || '';\r\n        return Croppie.globals.translate + '(' + this.x + 'px, ' + this.y + 'px' + suffix + ') scale(' + this.scale + ')';\r\n    };\r\n\r\n    var TransformOrigin = function (el) {\r\n        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            return;\r\n        }\r\n        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n        this.x = parseFloat(css[0]);\r\n        this.y = parseFloat(css[1]);\r\n    };\r\n\r\n    TransformOrigin.prototype.toString = function () {\r\n        return this.x + 'px ' + this.y + 'px';\r\n    };\r\n\r\n    function getExifOrientation (img) {\r\n        return img.exifdata && img.exifdata.Orientation ? num(img.exifdata.Orientation) : 1;\r\n    }\r\n\r\n    function drawCanvas(canvas, img, orientation) {\r\n        var width = img.width,\r\n            height = img.height,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        ctx.save();\r\n        switch (orientation) {\r\n          case 2:\r\n             ctx.translate(width, 0);\r\n             ctx.scale(-1, 1);\r\n             break;\r\n\r\n          case 3:\r\n              ctx.translate(width, height);\r\n              ctx.rotate(180*Math.PI/180);\r\n              break;\r\n\r\n          case 4:\r\n              ctx.translate(0, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 5:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 6:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.translate(0, -height);\r\n              break;\r\n\r\n          case 7:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(-90*Math.PI/180);\r\n              ctx.translate(-width, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 8:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.translate(0, width);\r\n              ctx.rotate(-90*Math.PI/180);\r\n              break;\r\n        }\r\n        ctx.drawImage(img, 0,0, width, height);\r\n        ctx.restore();\r\n    }\r\n\r\n    /* Private Methods */\r\n    function _create() {\r\n        var self = this,\r\n            contClass = 'croppie-container',\r\n            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n            boundary, img, viewport, overlay, bw, bh;\r\n\r\n        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n        // Properties on class\r\n        self.data = {};\r\n        self.elements = {};\r\n\r\n        boundary = self.elements.boundary = document.createElement('div');\r\n        viewport = self.elements.viewport = document.createElement('div');\r\n        img = self.elements.img = document.createElement('img');\r\n        overlay = self.elements.overlay = document.createElement('div');\r\n\r\n        if (self.options.useCanvas) {\r\n            self.elements.canvas = document.createElement('canvas');\r\n            self.elements.preview = self.elements.canvas;\r\n        }\r\n        else {\r\n            self.elements.preview = img;\r\n        }\r\n\r\n        addClass(boundary, 'cr-boundary');\r\n        boundary.setAttribute('aria-dropeffect', 'none');\r\n        bw = self.options.boundary.width;\r\n        bh = self.options.boundary.height;\r\n        css(boundary, {\r\n            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n        });\r\n\r\n        addClass(viewport, 'cr-viewport');\r\n        if (customViewportClass) {\r\n            addClass(viewport, customViewportClass);\r\n        }\r\n        css(viewport, {\r\n            width: self.options.viewport.width + 'px',\r\n            height: self.options.viewport.height + 'px'\r\n        });\r\n        viewport.setAttribute('tabindex', 0);\r\n\r\n        addClass(self.elements.preview, 'cr-image');\r\n        setAttributes(self.elements.preview, { 'alt': 'preview', 'aria-grabbed': 'false' });\r\n        addClass(overlay, 'cr-overlay');\r\n\r\n        self.element.appendChild(boundary);\r\n        boundary.appendChild(self.elements.preview);\r\n        boundary.appendChild(viewport);\r\n        boundary.appendChild(overlay);\r\n\r\n        addClass(self.element, contClass);\r\n        if (self.options.customClass) {\r\n            addClass(self.element, self.options.customClass);\r\n        }\r\n\r\n        _initDraggable.call(this);\r\n\r\n        if (self.options.enableZoom) {\r\n            _initializeZoom.call(self);\r\n        }\r\n\r\n        // if (self.options.enableOrientation) {\r\n        //     _initRotationControls.call(self);\r\n        // }\r\n\r\n        if (self.options.enableResize) {\r\n            _initializeResize.call(self);\r\n        }\r\n    }\r\n\r\n    // function _initRotationControls () {\r\n    //     var self = this,\r\n    //         wrap, btnLeft, btnRight, iLeft, iRight;\r\n\r\n    //     wrap = document.createElement('div');\r\n    //     self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n    //     self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\r\n    //     wrap.appendChild(btnLeft);\r\n    //     wrap.appendChild(btnRight);\r\n\r\n    //     iLeft = document.createElement('i');\r\n    //     iRight = document.createElement('i');\r\n    //     btnLeft.appendChild(iLeft);\r\n    //     btnRight.appendChild(iRight);\r\n\r\n    //     addClass(wrap, 'cr-rotate-controls');\r\n    //     addClass(btnLeft, 'cr-rotate-l');\r\n    //     addClass(btnRight, 'cr-rotate-r');\r\n\r\n    //     self.elements.boundary.appendChild(wrap);\r\n\r\n    //     btnLeft.addEventListener('click', function () {\r\n    //         self.rotate(-90);\r\n    //     });\r\n    //     btnRight.addEventListener('click', function () {\r\n    //         self.rotate(90);\r\n    //     });\r\n    // }\r\n\r\n    function _hasExif() {\r\n        return this.options.enableExif && window.EXIF;\r\n    }\r\n\r\n    function _initializeResize () {\r\n        var self = this;\r\n        var wrap = document.createElement('div');\r\n        var isDragging = false;\r\n        var direction;\r\n        var originalX;\r\n        var originalY;\r\n        var minSize = 50;\r\n        var maxWidth;\r\n        var maxHeight;\r\n        var vr;\r\n        var hr;\r\n\r\n        addClass(wrap, 'cr-resizer');\r\n        css(wrap, {\r\n            width: this.options.viewport.width + 'px',\r\n            height: this.options.viewport.height + 'px'\r\n        });\r\n\r\n        if (this.options.resizeControls.height) {\r\n            vr = document.createElement('div');\r\n            addClass(vr, 'cr-resizer-vertical');\r\n            wrap.appendChild(vr);\r\n        }\r\n\r\n        if (this.options.resizeControls.width) {\r\n            hr = document.createElement('div');\r\n            addClass(hr, 'cr-resizer-horisontal');\r\n            wrap.appendChild(hr);\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) {\r\n                return;\r\n            }\r\n\r\n            var overlayRect = self.elements.overlay.getBoundingClientRect();\r\n\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n            direction = ev.currentTarget.className.indexOf('vertical') !== -1 ? 'v' : 'h';\r\n            maxWidth = overlayRect.width;\r\n            maxHeight = overlayRect.height;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            var pageX = ev.pageX;\r\n            var pageY = ev.pageY;\r\n\r\n            ev.preventDefault();\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX;\r\n            var deltaY = pageY - originalY;\r\n            var newHeight = self.options.viewport.height + deltaY;\r\n            var newWidth = self.options.viewport.width + deltaX;\r\n\r\n            if (direction === 'v' && newHeight >= minSize && newHeight <= maxHeight) {\r\n                css(wrap, {\r\n                    height: newHeight + 'px'\r\n                });\r\n\r\n                self.options.boundary.height += deltaY;\r\n                css(self.elements.boundary, {\r\n                    height: self.options.boundary.height + 'px'\r\n                });\r\n\r\n                self.options.viewport.height += deltaY;\r\n                css(self.elements.viewport, {\r\n                    height: self.options.viewport.height + 'px'\r\n                });\r\n            }\r\n            else if (direction === 'h' && newWidth >= minSize && newWidth <= maxWidth) {\r\n                css(wrap, {\r\n                    width: newWidth + 'px'\r\n                });\r\n\r\n                self.options.boundary.width += deltaX;\r\n                css(self.elements.boundary, {\r\n                    width: self.options.boundary.width + 'px'\r\n                });\r\n\r\n                self.options.viewport.width += deltaX;\r\n                css(self.elements.viewport, {\r\n                    width: self.options.viewport.width + 'px'\r\n                });\r\n            }\r\n\r\n            _updateOverlay.call(self);\r\n            _updateZoomLimits.call(self);\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n        }\r\n\r\n        if (vr) {\r\n            vr.addEventListener('mousedown', mouseDown);\r\n            vr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        if (hr) {\r\n            hr.addEventListener('mousedown', mouseDown);\r\n            hr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        this.elements.boundary.appendChild(wrap);\r\n    }\r\n\r\n    function _setZoomerVal(v) {\r\n        if (this.options.enableZoom) {\r\n            var z = this.elements.zoomer,\r\n                val = fix(v, 4);\r\n\r\n            z.value = Math.max(parseFloat(z.min), Math.min(parseFloat(z.max), val)).toString();\r\n        }\r\n    }\r\n\r\n    function _initializeZoom() {\r\n        var self = this,\r\n            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n            zoomer = self.elements.zoomer = document.createElement('input');\r\n\r\n        addClass(wrap, 'cr-slider-wrap');\r\n        addClass(zoomer, 'cr-slider');\r\n        zoomer.type = 'range';\r\n        zoomer.step = '0.0001';\r\n        zoomer.value = '1';\r\n        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n        zoomer.setAttribute('aria-label', 'zoom');\r\n\r\n        self.element.appendChild(wrap);\r\n        wrap.appendChild(zoomer);\r\n\r\n        self._currentZoom = 1;\r\n\r\n        function change() {\r\n            _onZoom.call(self, {\r\n                value: parseFloat(zoomer.value),\r\n                origin: new TransformOrigin(self.elements.preview),\r\n                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n                transform: Transform.parse(self.elements.preview)\r\n            });\r\n        }\r\n\r\n        function scroll(ev) {\r\n            var delta, targetZoom;\r\n\r\n            if(self.options.mouseWheelZoom === 'ctrl' && ev.ctrlKey !== true){\r\n              return 0; \r\n            } else if (ev.wheelDelta) {\r\n                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n            } else if (ev.deltaY) {\r\n                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n            } else if (ev.detail) {\r\n                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n            } else {\r\n                delta = 0;\r\n            }\r\n\r\n            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\r\n            ev.preventDefault();\r\n            _setZoomerVal.call(self, targetZoom);\r\n            change.call(self);\r\n        }\r\n\r\n        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n        self.elements.zoomer.addEventListener('change', change);\r\n\r\n        if (self.options.mouseWheelZoom) {\r\n            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n        }\r\n    }\r\n\r\n    function _onZoom(ui) {\r\n        var self = this,\r\n            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview);\r\n\r\n        function applyCss() {\r\n            var transCss = {};\r\n            transCss[CSS_TRANSFORM] = transform.toString();\r\n            transCss[CSS_TRANS_ORG] = origin.toString();\r\n            css(self.elements.preview, transCss);\r\n        }\r\n\r\n        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n        transform.scale = self._currentZoom;\r\n        self.elements.zoomer.setAttribute('aria-valuenow', self._currentZoom);\r\n        applyCss();\r\n\r\n        if (self.options.enforceBoundary) {\r\n            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n                transBoundaries = boundaries.translate,\r\n                oBoundaries = boundaries.origin;\r\n\r\n            if (transform.x >= transBoundaries.maxX) {\r\n                origin.x = oBoundaries.minX;\r\n                transform.x = transBoundaries.maxX;\r\n            }\r\n\r\n            if (transform.x <= transBoundaries.minX) {\r\n                origin.x = oBoundaries.maxX;\r\n                transform.x = transBoundaries.minX;\r\n            }\r\n\r\n            if (transform.y >= transBoundaries.maxY) {\r\n                origin.y = oBoundaries.minY;\r\n                transform.y = transBoundaries.maxY;\r\n            }\r\n\r\n            if (transform.y <= transBoundaries.minY) {\r\n                origin.y = oBoundaries.maxY;\r\n                transform.y = transBoundaries.minY;\r\n            }\r\n        }\r\n        applyCss();\r\n        _debouncedOverlay.call(self);\r\n        _triggerUpdate.call(self);\r\n    }\r\n\r\n    function _getVirtualBoundaries(viewport) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            vpWidth = viewport.width,\r\n            vpHeight = viewport.height,\r\n            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n            imgRect = self.elements.preview.getBoundingClientRect(),\r\n            curImgWidth = imgRect.width,\r\n            curImgHeight = imgRect.height,\r\n            halfWidth = vpWidth / 2,\r\n            halfHeight = vpHeight / 2;\r\n\r\n        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\r\n        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\r\n        var originMinX = (1 / scale) * halfWidth;\r\n        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\r\n        var originMinY = (1 / scale) * halfHeight;\r\n        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\r\n        return {\r\n            translate: {\r\n                maxX: maxX,\r\n                minX: minX,\r\n                maxY: maxY,\r\n                minY: minY\r\n            },\r\n            origin: {\r\n                maxX: originMaxX,\r\n                minX: originMinX,\r\n                maxY: originMaxY,\r\n                minY: originMinY\r\n            }\r\n        };\r\n    }\r\n\r\n    function _updateCenterPoint(rotate) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            data = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n            pc = new TransformOrigin(self.elements.preview),\r\n            top = (vpData.top - data.top) + (vpData.height / 2),\r\n            left = (vpData.left - data.left) + (vpData.width / 2),\r\n            center = {},\r\n            adj = {};\r\n\r\n        if (rotate) {\r\n            var cx = pc.x;\r\n            var cy = pc.y;\r\n            var tx = transform.x;\r\n            var ty = transform.y;\r\n\r\n            center.y = cx;\r\n            center.x = cy;\r\n            transform.y = tx;\r\n            transform.x = ty;\r\n        }\r\n        else {\r\n            center.y = top / scale;\r\n            center.x = left / scale;\r\n\r\n            adj.y = (center.y - pc.y) * (1 - scale);\r\n            adj.x = (center.x - pc.x) * (1 - scale);\r\n\r\n            transform.x -= adj.x;\r\n            transform.y -= adj.y;\r\n        }\r\n\r\n        var newCss = {};\r\n        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n        newCss[CSS_TRANSFORM] = transform.toString();\r\n        css(self.elements.preview, newCss);\r\n    }\r\n\r\n    function _initDraggable() {\r\n        var self = this,\r\n            isDragging = false,\r\n            originalX,\r\n            originalY,\r\n            originalDistance,\r\n            vpRect,\r\n            transform;\r\n\r\n        function assignTransformCoordinates(deltaX, deltaY) {\r\n            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n                top = transform.y + deltaY,\r\n                left = transform.x + deltaX;\r\n\r\n            if (self.options.enforceBoundary) {\r\n                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n                    transform.y = top;\r\n                }\r\n\r\n                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n                    transform.x = left;\r\n                }\r\n            }\r\n            else {\r\n                transform.y = top;\r\n                transform.x = left;\r\n            }\r\n        }\r\n\r\n        function toggleGrabState(isDragging) {\r\n          self.elements.preview.setAttribute('aria-grabbed', isDragging);\r\n          self.elements.boundary.setAttribute('aria-dropeffect', isDragging? 'move': 'none');\r\n        }\r\n\r\n        function keyDown(ev) {\r\n            var LEFT_ARROW  = 37,\r\n                UP_ARROW    = 38,\r\n                RIGHT_ARROW = 39,\r\n                DOWN_ARROW  = 40;\r\n\r\n            if (ev.shiftKey && (ev.keyCode === UP_ARROW || ev.keyCode === DOWN_ARROW)) {\r\n                var zoom;\r\n                if (ev.keyCode === UP_ARROW) {\r\n                    zoom = parseFloat(self.elements.zoomer.value) + parseFloat(self.elements.zoomer.step)\r\n                }\r\n                else {\r\n                    zoom = parseFloat(self.elements.zoomer.value) - parseFloat(self.elements.zoomer.step)\r\n                }\r\n                self.setZoom(zoom);\r\n            }\r\n            else if (self.options.enableKeyMovement && (ev.keyCode >= 37 && ev.keyCode <= 40)) {\r\n                ev.preventDefault();\r\n                var movement = parseKeyDown(ev.keyCode);\r\n\r\n                transform = Transform.parse(self.elements.preview);\r\n                document.body.style[CSS_USERSELECT] = 'none';\r\n                vpRect = self.elements.viewport.getBoundingClientRect();\r\n                keyMove(movement);\r\n            }\r\n\r\n            function parseKeyDown(key) {\r\n                switch (key) {\r\n                    case LEFT_ARROW:\r\n                        return [1, 0];\r\n                    case UP_ARROW:\r\n                        return [0, 1];\r\n                    case RIGHT_ARROW:\r\n                        return [-1, 0];\r\n                    case DOWN_ARROW:\r\n                        return [0, -1];\r\n                }\r\n            }\r\n        }\r\n\r\n        function keyMove(movement) {\r\n            var deltaX = movement[0],\r\n                deltaY = movement[1],\r\n                newCss = {};\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) return;\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n            toggleGrabState(isDragging);\r\n            transform = Transform.parse(self.elements.preview);\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n            vpRect = self.elements.viewport.getBoundingClientRect();\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            ev.preventDefault();\r\n            var pageX = ev.pageX,\r\n                pageY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX,\r\n                deltaY = pageY - originalY,\r\n                newCss = {};\r\n\r\n            if (ev.type === 'touchmove') {\r\n                if (ev.touches.length > 1) {\r\n                    var touch1 = ev.touches[0];\r\n                    var touch2 = ev.touches[1];\r\n                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\r\n                    if (!originalDistance) {\r\n                        originalDistance = dist / self._currentZoom;\r\n                    }\r\n\r\n                    var scale = dist / originalDistance;\r\n\r\n                    _setZoomerVal.call(self, scale);\r\n                    dispatchChange(self.elements.zoomer);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            toggleGrabState(isDragging);\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n        self.elements.viewport.addEventListener('keydown', keyDown);\r\n        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n    }\r\n\r\n    function _updateOverlay() {\r\n        if (!this.elements) return; // since this is debounced, it can be fired after destroy\r\n        var self = this,\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        css(self.elements.overlay, {\r\n            width: imgData.width + 'px',\r\n            height: imgData.height + 'px',\r\n            top: (imgData.top - boundRect.top) + 'px',\r\n            left: (imgData.left - boundRect.left) + 'px'\r\n        });\r\n    }\r\n    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\r\n    function _triggerUpdate() {\r\n        var self = this,\r\n            data = self.get();\r\n\r\n        if (!_isVisible.call(self)) {\r\n            return;\r\n        }\r\n\r\n        self.options.update.call(self, data);\r\n        if (self.$ && typeof Prototype === 'undefined') {\r\n            self.$(self.element).trigger('update.croppie', data);\r\n        }\r\n        else {\r\n            var ev;\r\n            if (window.CustomEvent) {\r\n                ev = new CustomEvent('update', { detail: data });\r\n            } else {\r\n                ev = document.createEvent('CustomEvent');\r\n                ev.initCustomEvent('update', true, true, data);\r\n            }\r\n\r\n            self.element.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n    function _isVisible() {\r\n        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n    }\r\n\r\n    function _updatePropertiesFromImage() {\r\n        var self = this,\r\n            initialZoom = 1,\r\n            cssReset = {},\r\n            img = self.elements.preview,\r\n            imgData,\r\n            transformReset = new Transform(0, 0, initialZoom),\r\n            originReset = new TransformOrigin(),\r\n            isVisible = _isVisible.call(self);\r\n\r\n        if (!isVisible || self.data.bound) {// if the croppie isn't visible or it doesn't need binding\r\n            return;\r\n        }\r\n\r\n        self.data.bound = true;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n        cssReset['opacity'] = 1;\r\n        css(img, cssReset);\r\n\r\n        imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        self._originalImageWidth = imgData.width;\r\n        self._originalImageHeight = imgData.height;\r\n        self.data.orientation = getExifOrientation(self.elements.img);\r\n\r\n        if (self.options.enableZoom) {\r\n            _updateZoomLimits.call(self, true);\r\n        }\r\n        else {\r\n            self._currentZoom = initialZoom;\r\n        }\r\n\r\n        transformReset.scale = self._currentZoom;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        css(img, cssReset);\r\n\r\n        if (self.data.points.length) {\r\n            _bindPoints.call(self, self.data.points);\r\n        }\r\n        else {\r\n            _centerImage.call(self);\r\n        }\r\n\r\n        _updateCenterPoint.call(self);\r\n        _updateOverlay.call(self);\r\n    }\r\n\r\n    function _updateZoomLimits (initial) {\r\n        var self = this,\r\n            minZoom = Math.max(self.options.minZoom, 0) || 0,\r\n            maxZoom = self.options.maxZoom || 1.5,\r\n            initialZoom,\r\n            defaultInitialZoom,\r\n            zoomer = self.elements.zoomer,\r\n            scale = parseFloat(zoomer.value),\r\n            boundaryData = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = naturalImageDimensions(self.elements.img, self.data.orientation),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            minW,\r\n            minH;\r\n        if (self.options.enforceBoundary) {\r\n            minW = vpData.width / imgData.width;\r\n            minH = vpData.height / imgData.height;\r\n            minZoom = Math.max(minW, minH);\r\n        }\r\n\r\n        if (minZoom >= maxZoom) {\r\n            maxZoom = minZoom + 1;\r\n        }\r\n\r\n        zoomer.min = fix(minZoom, 4);\r\n        zoomer.max = fix(maxZoom, 4);\r\n        \r\n        if (!initial && (scale < zoomer.min || scale > zoomer.max)) {\r\n            _setZoomerVal.call(self, scale < zoomer.min ? zoomer.min : zoomer.max);\r\n        }\r\n        else if (initial) {\r\n            defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n            _setZoomerVal.call(self, initialZoom);\r\n        }\r\n\r\n        dispatchChange(zoomer);\r\n    }\r\n\r\n    function _bindPoints(points) {\r\n        if (points.length !== 4) {\r\n            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n        }\r\n        var self = this,\r\n            pointsWidth = points[2] - points[0],\r\n            // pointsHeight = points[3] - points[1],\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            vpOffset = {\r\n                left: vpData.left - boundRect.left,\r\n                top: vpData.top - boundRect.top\r\n            },\r\n            scale = vpData.width / pointsWidth,\r\n            originTop = points[1],\r\n            originLeft = points[0],\r\n            transformTop = (-1 * points[1]) + vpOffset.top,\r\n            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n            newCss = {};\r\n\r\n        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n        css(self.elements.preview, newCss);\r\n\r\n        _setZoomerVal.call(self, scale);\r\n        self._currentZoom = scale;\r\n    }\r\n\r\n    function _centerImage() {\r\n        var self = this,\r\n            imgDim = self.elements.preview.getBoundingClientRect(),\r\n            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n            vpLeft = vpDim.left - boundDim.left,\r\n            vpTop = vpDim.top - boundDim.top,\r\n            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n            transform = new Transform(w, h, self._currentZoom);\r\n\r\n        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n    }\r\n\r\n    function _transferImageToCanvas(customOrientation) {\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        var orientation = self.options.enableOrientation && customOrientation || getExifOrientation(img);\r\n        drawCanvas(canvas, img, orientation);\r\n    }\r\n\r\n    function _getCanvas(data) {\r\n        var self = this,\r\n            points = data.points,\r\n            left = num(points[0]),\r\n            top = num(points[1]),\r\n            right = num(points[2]),\r\n            bottom = num(points[3]),\r\n            width = right-left,\r\n            height = bottom-top,\r\n            circle = data.circle,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            startX = 0,\r\n            startY = 0,\r\n            canvasWidth = data.outputWidth || width,\r\n            canvasHeight = data.outputHeight || height;\r\n\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n\r\n        if (data.backgroundColor) {\r\n            ctx.fillStyle = data.backgroundColor;\r\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        }\r\n\r\n        // By default assume we're going to draw the entire\r\n        // source image onto the destination canvas.\r\n        var sx = left,\r\n            sy = top,\r\n            sWidth = width,\r\n            sHeight = height,\r\n            dx = 0,\r\n            dy = 0,\r\n            dWidth = canvasWidth,\r\n            dHeight = canvasHeight;\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the x-axis.\r\n        // Handle translations when projecting onto the destination canvas.\r\n        //\r\n\r\n        // The smallest possible source x-position is 0.\r\n        if (left < 0) {\r\n            sx = 0;\r\n            dx = (Math.abs(left) / width) * canvasWidth;\r\n        }\r\n\r\n        // The largest possible source width is the original image's width.\r\n        if (sWidth + sx > self._originalImageWidth) {\r\n            sWidth = self._originalImageWidth - sx;\r\n            dWidth =  (sWidth / width) * canvasWidth;\r\n        }\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the y-axis.\r\n        //\r\n\r\n        // The smallest possible source y-position is 0.\r\n        if (top < 0) {\r\n            sy = 0;\r\n            dy = (Math.abs(top) / height) * canvasHeight;\r\n        }\r\n\r\n        // The largest possible source height is the original image's height.\r\n        if (sHeight + sy > self._originalImageHeight) {\r\n            sHeight = self._originalImageHeight - sy;\r\n            dHeight = (sHeight / height) * canvasHeight;\r\n        }\r\n\r\n        // console.table({ left, right, top, bottom, canvasWidth, canvasHeight, width, height, startX, startY, circle, sx, sy, dx, dy, sWidth, sHeight, dWidth, dHeight });\r\n\r\n        ctx.drawImage(this.elements.preview, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\r\n        if (circle) {\r\n            ctx.fillStyle = '#fff';\r\n            ctx.globalCompositeOperation = 'destination-in';\r\n            ctx.beginPath();\r\n            ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return canvas;\r\n    }\r\n\r\n    function _getHtmlResult(data) {\r\n        var points = data.points,\r\n            div = document.createElement('div'),\r\n            img = document.createElement('img'),\r\n            width = points[2] - points[0],\r\n            height = points[3] - points[1];\r\n\r\n        addClass(div, 'croppie-result');\r\n        div.appendChild(img);\r\n        css(img, {\r\n            left: (-1 * points[0]) + 'px',\r\n            top: (-1 * points[1]) + 'px'\r\n        });\r\n        img.src = data.url;\r\n        css(div, {\r\n            width: width + 'px',\r\n            height: height + 'px'\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    function _getBase64Result(data) {\r\n        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n    }\r\n\r\n    function _getBlobResult(data) {\r\n        var self = this;\r\n        return new Promise(function (resolve) {\r\n            _getCanvas.call(self, data).toBlob(function (blob) {\r\n                resolve(blob);\r\n            }, data.format, data.quality);\r\n        });\r\n    }\r\n\r\n    function _replaceImage(img) {\r\n        if (this.elements.img.parentNode) {\r\n            Array.prototype.forEach.call(this.elements.img.classList, function(c) { img.classList.add(c); });\r\n            this.elements.img.parentNode.replaceChild(img, this.elements.img);\r\n            this.elements.preview = img; // if the img is attached to the DOM, they're not using the canvas\r\n        }\r\n        this.elements.img = img;\r\n    }\r\n\r\n    function _bind(options, cb) {\r\n        var self = this,\r\n            url,\r\n            points = [],\r\n            zoom = null,\r\n            hasExif = _hasExif.call(self);\r\n\r\n        if (typeof (options) === 'string') {\r\n            url = options;\r\n            options = {};\r\n        }\r\n        else if (Array.isArray(options)) {\r\n            points = options.slice();\r\n        }\r\n        else if (typeof (options) === 'undefined' && self.data.url) { //refreshing\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            return null;\r\n        }\r\n        else {\r\n            url = options.url;\r\n            points = options.points || [];\r\n            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n        }\r\n\r\n        self.data.bound = false;\r\n        self.data.url = url || self.data.url;\r\n        self.data.boundZoom = zoom;\r\n\r\n        return loadImage(url, hasExif).then(function (img) {\r\n            _replaceImage.call(self, img);\r\n            if (!points.length) {\r\n                var natDim = naturalImageDimensions(img);\r\n                var rect = self.elements.viewport.getBoundingClientRect();\r\n                var aspectRatio = rect.width / rect.height;\r\n                var imgAspectRatio = natDim.width / natDim.height;\r\n                var width, height;\r\n\r\n                if (imgAspectRatio > aspectRatio) {\r\n                    height = natDim.height;\r\n                    width = height * aspectRatio;\r\n                }\r\n                else {\r\n                    width = natDim.width;\r\n                    height = natDim.height / aspectRatio;\r\n                }\r\n\r\n                var x0 = (natDim.width - width) / 2;\r\n                var y0 = (natDim.height - height) / 2;\r\n                var x1 = x0 + width;\r\n                var y1 = y0 + height;\r\n                self.data.points = [x0, y0, x1, y1];\r\n            }\r\n            else if (self.options.relative) {\r\n                points = [\r\n                    points[0] * img.naturalWidth / 100,\r\n                    points[1] * img.naturalHeight / 100,\r\n                    points[2] * img.naturalWidth / 100,\r\n                    points[3] * img.naturalHeight / 100\r\n                ];\r\n            }\r\n\r\n            self.data.points = points.map(function (p) {\r\n                return parseFloat(p);\r\n            });\r\n            if (self.options.useCanvas) {\r\n                _transferImageToCanvas.call(self, options.orientation);\r\n            }\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            cb && cb();\r\n        });\r\n    }\r\n\r\n    function fix(v, decimalPoints) {\r\n        return parseFloat(v).toFixed(decimalPoints || 0);\r\n    }\r\n\r\n    function _get() {\r\n        var self = this,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            x1 = vpData.left - imgData.left,\r\n            y1 = vpData.top - imgData.top,\r\n            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2, //border\r\n            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n            scale = self._currentZoom;\r\n\r\n        if (scale === Infinity || isNaN(scale)) {\r\n            scale = 1;\r\n        }\r\n\r\n        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n        x1 = Math.max(max, x1 / scale);\r\n        y1 = Math.max(max, y1 / scale);\r\n        x2 = Math.max(max, x2 / scale);\r\n        y2 = Math.max(max, y2 / scale);\r\n\r\n        return {\r\n            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n            zoom: scale,\r\n            orientation: self.data.orientation\r\n        };\r\n    }\r\n\r\n    var RESULT_DEFAULTS = {\r\n            type: 'canvas',\r\n            format: 'png',\r\n            quality: 1\r\n        },\r\n        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\r\n    function _result(options) {\r\n        var self = this,\r\n            data = _get.call(self),\r\n            opts = deepExtend(clone(RESULT_DEFAULTS), clone(options)),\r\n            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n            size = opts.size || 'viewport',\r\n            format = opts.format,\r\n            quality = opts.quality,\r\n            backgroundColor = opts.backgroundColor,\r\n            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n            ratio = vpRect.width / vpRect.height,\r\n            prom;\r\n\r\n        if (size === 'viewport') {\r\n            data.outputWidth = vpRect.width;\r\n            data.outputHeight = vpRect.height;\r\n        } else if (typeof size === 'object') {\r\n            if (size.width && size.height) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.height;\r\n            } else if (size.width) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.width / ratio;\r\n            } else if (size.height) {\r\n                data.outputWidth = size.height * ratio;\r\n                data.outputHeight = size.height;\r\n            }\r\n        }\r\n\r\n        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n            data.format = 'image/' + format;\r\n            data.quality = quality;\r\n        }\r\n\r\n        data.circle = circle;\r\n        data.url = self.data.url;\r\n        data.backgroundColor = backgroundColor;\r\n\r\n        prom = new Promise(function (resolve) {\r\n            switch(resultType.toLowerCase())\r\n            {\r\n                case 'rawcanvas':\r\n                    resolve(_getCanvas.call(self, data));\r\n                    break;\r\n                case 'canvas':\r\n                case 'base64':\r\n                    resolve(_getBase64Result.call(self, data));\r\n                    break;\r\n                case 'blob':\r\n                    _getBlobResult.call(self, data).then(resolve);\r\n                    break;\r\n                default:\r\n                    resolve(_getHtmlResult.call(self, data));\r\n                    break;\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function _refresh() {\r\n        _updatePropertiesFromImage.call(this);\r\n    }\r\n\r\n    function _rotate(deg) {\r\n        if (!this.options.useCanvas || !this.options.enableOrientation) {\r\n            throw 'Croppie: Cannot rotate without enableOrientation && EXIF.js included';\r\n        }\r\n\r\n        var self = this,\r\n            canvas = self.elements.canvas;\r\n\r\n        self.data.orientation = getExifOffset(self.data.orientation, deg);\r\n        drawCanvas(canvas, self.elements.img, self.data.orientation);\r\n        _updateCenterPoint.call(self, true);\r\n        _updateZoomLimits.call(self);\r\n    }\r\n\r\n    function _destroy() {\r\n        var self = this;\r\n        self.element.removeChild(self.elements.boundary);\r\n        removeClass(self.element, 'croppie-container');\r\n        if (self.options.enableZoom) {\r\n            self.element.removeChild(self.elements.zoomerWrap);\r\n        }\r\n        delete self.elements;\r\n    }\r\n\r\n    if (window.jQuery) {\r\n        var $ = window.jQuery;\r\n        $.fn.croppie = function (opts) {\r\n            var ot = typeof opts;\r\n\r\n            if (ot === 'string') {\r\n                var args = Array.prototype.slice.call(arguments, 1);\r\n                var singleInst = $(this).data('croppie');\r\n\r\n                if (opts === 'get') {\r\n                    return singleInst.get();\r\n                }\r\n                else if (opts === 'result') {\r\n                    return singleInst.result.apply(singleInst, args);\r\n                }\r\n                else if (opts === 'bind') {\r\n                    return singleInst.bind.apply(singleInst, args);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    var i = $(this).data('croppie');\r\n                    if (!i) return;\r\n\r\n                    var method = i[opts];\r\n                    if ($.isFunction(method)) {\r\n                        method.apply(i, args);\r\n                        if (opts === 'destroy') {\r\n                            $(this).removeData('croppie');\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw 'Croppie ' + opts + ' method not found';\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return this.each(function () {\r\n                    var i = new Croppie(this, opts);\r\n                    i.$ = $;\r\n                    $(this).data('croppie', i);\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function Croppie(element, opts) {\r\n        if (element.className.indexOf('croppie-container') > -1) {\r\n            throw new Error(\"Croppie: Can't initialize croppie more than once\");\r\n        }\r\n        this.element = element;\r\n        this.options = deepExtend(clone(Croppie.defaults), opts);\r\n\r\n        if (this.element.tagName.toLowerCase() === 'img') {\r\n            var origImage = this.element;\r\n            addClass(origImage, 'cr-original-image');\r\n            setAttributes(origImage, {'aria-hidden' : 'true', 'alt' : '' });\r\n            var replacementDiv = document.createElement('div');\r\n            this.element.parentNode.appendChild(replacementDiv);\r\n            replacementDiv.appendChild(origImage);\r\n            this.element = replacementDiv;\r\n            this.options.url = this.options.url || origImage.src;\r\n        }\r\n\r\n        _create.call(this);\r\n        if (this.options.url) {\r\n            var bindOpts = {\r\n                url: this.options.url,\r\n                points: this.options.points\r\n            };\r\n            delete this.options['url'];\r\n            delete this.options['points'];\r\n            _bind.call(this, bindOpts);\r\n        }\r\n    }\r\n\r\n    Croppie.defaults = {\r\n        viewport: {\r\n            width: 100,\r\n            height: 100,\r\n            type: 'square'\r\n        },\r\n        boundary: { },\r\n        orientationControls: {\r\n            enabled: true,\r\n            leftClass: '',\r\n            rightClass: ''\r\n        },\r\n        resizeControls: {\r\n            width: true,\r\n            height: true\r\n        },\r\n        customClass: '',\r\n        showZoomer: true,\r\n        enableZoom: true,\r\n        enableResize: false,\r\n        mouseWheelZoom: true,\r\n        enableExif: false,\r\n        enforceBoundary: true,\r\n        enableOrientation: false,\r\n        enableKeyMovement: true,\r\n        update: function () { }\r\n    };\r\n\r\n    Croppie.globals = {\r\n        translate: 'translate3d'\r\n    };\r\n\r\n    deepExtend(Croppie.prototype, {\r\n        bind: function (options, cb) {\r\n            return _bind.call(this, options, cb);\r\n        },\r\n        get: function () {\r\n            var data = _get.call(this);\r\n            var points = data.points;\r\n            if (this.options.relative) {\r\n                points[0] /= this.elements.img.naturalWidth / 100;\r\n                points[1] /= this.elements.img.naturalHeight / 100;\r\n                points[2] /= this.elements.img.naturalWidth / 100;\r\n                points[3] /= this.elements.img.naturalHeight / 100;\r\n            }\r\n            return data;\r\n        },\r\n        result: function (type) {\r\n            return _result.call(this, type);\r\n        },\r\n        refresh: function () {\r\n            return _refresh.call(this);\r\n        },\r\n        setZoom: function (v) {\r\n            _setZoomerVal.call(this, v);\r\n            dispatchChange(this.elements.zoomer);\r\n        },\r\n        rotate: function (deg) {\r\n            _rotate.call(this, deg);\r\n        },\r\n        destroy: function () {\r\n            return _destroy.call(this);\r\n        }\r\n    });\r\n    return Croppie;\r\n}));\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n"],"sourceRoot":""}